<!DOCTYPE html>
<html>
<head>
    <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
    <link rel="import" href="bower_components/polymer/polymer.html">
    <link rel="import" href="bower_components/core-icons/core-icons.html">
    <link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="bower_components/font-roboto/roboto.html">
    <link rel="import" href="editable-listbox.html">
    <script>
        function check() {
            var users = document.querySelector('#users');
            alert(users.rows);
        }

        var funcs = {
            verify: function (arg) {
                if (arg === "Mark")
                    return "Mark is not allowed";
                else
                    return null;
            },
            convert: function (arg) {
                return JSON.parse('{"label":"' + arg + '"}');
            }
        }
    </script>
</head>
<body unresolved>
    <h1>editable-listbox</h1>
    <div style="width: 300px;">
        <editable-listbox id="users" header="Users" validation="funcs.verify" conversion="funcs.convert"
                          rows=["John",{"label":"Gregory","id":"89"}]></editable-listbox>
    </div>
    <br/><br/>
    <input type="button" value="Verify" onclick="check();"/>
    <script>
    (function() {
        function eventHandler(e) {
            console.log(e.type, e.detail.rows.length);
        }

        document.querySelector('#users').addEventListener('data-changed',eventHandler);
    })();

    </script>

</body>
</html>
